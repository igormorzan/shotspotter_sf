---
title: "Shotspotter SF"
author: "Igor Morzan, Simone Chu"
date: "4/18/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(sf)
library(stringr)
library(tigris)
library(lubridate)
library(gganimate)
library(ggthemes)
library(transformr)
```

```{r echo=FALSE, warning=FALSE, message=FALSE}
data <- read_csv("http://justicetechlab.org/wp-content/uploads/2018/05/San_Francisco_ShotSpotter.csv")

shapes <- urban_areas(class = "sf") %>%
  filter(NAME10 == "San Francisco--Oakland, CA")
```

```{r echo=FALSE}

shots_fired <- data %>%
  mutate(Date = dmy(Date)) %>%
  filter(Type == "Multiple_Gunshots")

shot_locations <- st_as_sf(shots_fired, 
                            coords = c("Longitude", "Latitude"), 
                            crs = 4326)
```

```{r}

ggplot(shapes) + 
  geom_sf() +
  geom_sf(data = shot_locations, 
          mapping = aes(color = "Rnds"), show.legend = "point") + 
  theme_map() +
  transition_states(Date)

```

